# https://learn.microsoft.com/en-us/azure/templates/microsoft.app/containerapps?pivots=deployment-language-bicep
# https://learn.microsoft.com/en-au/azure/container-apps/azure-resource-manager-api-spec?tabs=yaml#container-app-examples
name: user-service
properties:
  environmentId: /subscriptions/[subscription_id]/resourceGroups/microservice-reference-framework/providers/Microsoft.App/managedEnvironments/microservice-ref-framework-env
  configuration:
    ingress:
      allowInsecure: true
      external: true
      targetPort: 8085
    dapr:
      appId: userservice
      enabled: true
      appPort: 8085
  template:
    containers:
      - image: docker.io/michalmoudry/user-service:latest
        name: user-service
        env:
          - name: FIREBASE_CREDS
            value: '[firebase_creds]'